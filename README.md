# üìò –¢–µ—Ö–Ω—ñ—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äî NutriScan –ª–æ–∫–∞–ª—å–Ω–∏–π AI-—Å–µ—Ä–≤—ñ—Å

–ú–µ—Ç–∞: –†–æ–∑—Ä–æ–±–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π AI-—Å–µ—Ä–≤—ñ—Å –Ω–∞ Ubuntu 22.04, —è–∫–∏–π:

1. –ü—Ä–∏–π–º–∞—î —Ñ–æ—Ç–æ —Å—Ç—Ä–∞–≤–∏ —á–µ—Ä–µ–∑ API
2. –í–∏–∑–Ω–∞—á–∞—î –Ω–∞–∑–≤—É —Å—Ç—Ä–∞–≤–∏
3. –í–∏–∑–Ω–∞—á–∞—î —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏
4. –û—Ü—ñ–Ω—é—î –º–∞—Å—É (–≤–∞–≥—É)
5. –†–æ–∑—Ä–∞—Ö–æ–≤—É—î –∫–∞–ª–æ—Ä—ñ–π–Ω—ñ—Å—Ç—å —ñ –º–∞–∫—Ä–æ–µ–ª–µ–º–µ–Ω—Ç–∏ (–ë–ñ–£)
6. –ü–æ–≤–µ—Ä—Ç–∞—î JSON-–≤—ñ–¥–ø–æ–≤—ñ–¥—å

## üß© –ï—Ç–∞–ø 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ API
üéØ –ú–µ—Ç–∞
–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ FastAPI-—Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î POST-–∑–∞–ø–∏—Ç –∑ —Ñ–æ—Ç–æ.

üì• –í—Ö—ñ–¥
POST /upload/ –∑ multipart/form-data, –ø–æ–ª–µ image

üì§ –í–∏—Ö—ñ–¥
```
{ "message": "Image received", "filename": "some_image.jpg" }
```
üõ† –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- FastAPI
- Pydantic
- Uvicorn

‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
- –§–æ—Ç–æ –ø—Ä–∏–π–º–∞—î—Ç—å—Å—è —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ —Ç–∏–º—á–∞—Å–æ–≤—ñ–π –ø–∞–ø—Ü—ñ
- –ù–∞–ø–∏—Å–∞–Ω–æ –∞–≤—Ç–æ—Ç–µ—Å—Ç: test_upload.py

## üß© –ï—Ç–∞–ø 2: –ú–æ–¥—É–ª—å –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Å—Ç—Ä–∞–≤
üéØ –ú–µ—Ç–∞
–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–æ–¥–µ–ª—å (–º–æ–∫/—Ä–µ–∞–ª—å–Ω–∞) –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–∑–≤–∏ —Å—Ç—Ä–∞–≤–∏ –ø–æ —Ñ–æ—Ç–æ.

üì• –í—Ö—ñ–¥
–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–µ)

üì§ –í–∏—Ö—ñ–¥
```
{ "dish_name": "borsch", "confidence": 0.91 }
```
üõ† –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- PyTorch –∞–±–æ HuggingFace
- Torchvision / ViT / EfficientNet
- OpenCV

‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –ú–æ–¥–µ–ª—å —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è
- –ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–º—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ –≤–∏–¥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ù–∞–ø–∏—Å–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç test_classifier.py

## üß© –ï—Ç–∞–ø 3: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è API + –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
üéØ –ú–µ—Ç–∞
–§–æ—Ç–æ –∑ API –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ –º–æ–¥–µ–ª—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É.

üì• –í—Ö—ñ–¥
POST /classify/ –∑ —Ñ–æ—Ç–æ

üì§ –í–∏—Ö—ñ–¥
```
{ "dish_name": "borsch", "confidence": 0.91 }
```
‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ API –≤ –º–æ–¥–µ–ª—å
- –ê–≤—Ç–æ—Ç–µ—Å—Ç test_api_classification.py

## üß© –ï—Ç–∞–ø 4: –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤
üéØ –ú–µ—Ç–∞
–†–æ–∑—Ä–æ–±–∏—Ç–∏/–ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –º–æ–¥–µ–ª—å –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ –Ω–∞ —Ñ–æ—Ç–æ.

üì• –í—Ö—ñ–¥
–§–æ—Ç–æ —Å—Ç—Ä–∞–≤–∏

üì§ –í–∏—Ö—ñ–¥
```
{
  "ingredients": [
    {"name": "potato", "confidence": 0.88},
    {"name": "carrot", "confidence": 0.81}
  ]
}
```
üõ† –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- –ú–æ–¥–µ–ª—å –¥–µ—Ç–µ–∫—Ü—ñ—ó: YOLOv5/YOLOv8/Detic/AnyLabel
- Torch / Transformers
- OpenCV

‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –ú–æ–¥–µ–ª—å –ø—Ä–∞—Ü—é—î –ª–æ–∫–∞–ª—å–Ω–æ
- –¢–µ—Å—Ç –Ω–∞ –æ–¥–Ω–æ–º—É —Ñ–æ—Ç–æ test_ingredients.py

## üß© –ï—Ç–∞–ø 5: –û—Ü—ñ–Ω–∫–∞ –º–∞—Å–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤
üéØ –ú–µ—Ç–∞
–û—Ü—ñ–Ω–∏—Ç–∏ –ø—Ä–∏–±–ª–∏–∑–Ω—É –≤–∞–≥—É —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–∑–º—ñ—Ä—É.

üì• –í—Ö—ñ–¥
–§–æ—Ç–æ + bounding boxes —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤

üì§ –í–∏—Ö—ñ–¥
```
{
  "ingredients": [
    {"name": "carrot", "weight_g": 50},
    {"name": "potato", "weight_g": 100}
  ]
}
```
üõ† –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- –ï–≤—Ä–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–ª–æ—â–µ—é –æ–±'—î–∫—Ç–∞
- Kalman –∞–±–æ —Ä–µ–≥—Ä–µ—Å—ñ–π–Ω–∞ –º–æ–¥–µ–ª—å (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞–≥–∏ –ø—Ä–∞—Ü—é—î
- –ê–≤—Ç–æ—Ç–µ—Å—Ç test_weight_estimation.py

## üß© –ï—Ç–∞–ø 6: –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫–∞–ª–æ—Ä—ñ–π–Ω–æ—Å—Ç—ñ —ñ –ë–ñ–£
üéØ –ú–µ—Ç–∞
–ù–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–∑–≤–∏ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ —ñ –≤–∞–≥–∏ —Ä–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫–∞–ª–æ—Ä—ñ—ó, –±—ñ–ª–∫–∏, –∂–∏—Ä–∏, –≤—É–≥–ª–µ–≤–æ–¥–∏.

üì• –í—Ö—ñ–¥
JSON –∑ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∞–º–∏ —Ç–∞ –≤–∞–≥–æ—é

üì§ –í–∏—Ö—ñ–¥
```
{
  "total": {
    "calories_kcal": 350,
    "protein_g": 12,
    "fat_g": 8,
    "carbs_g": 45
  }
}
```
üõ† –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- Open Food Facts API
- –ö–µ—à—É–≤–∞–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ (SQLite)

‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –î–∞–Ω—ñ –ø—Ä–∏—Ö–æ–¥—è—Ç—å –∑ OFF
- –¢–µ—Å—Ç —ñ–∑ –≤—ñ–¥–æ–º–∏–º –Ω–∞–±–æ—Ä–æ–º —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤ test_nutrition_calc.py

## üß© –ï—Ç–∞–ø 7: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤—Å—å–æ–≥–æ –∫–æ–Ω–≤–µ—î—Ä–∞
üéØ –ú–µ—Ç–∞
–û–±‚Äô—î–¥–Ω–∞—Ç–∏ –≤—Å—ñ –µ—Ç–∞–ø–∏ –≤ –æ–¥–∏–Ω API-–µ–Ω–¥–ø–æ—ñ–Ω—Ç /analyze/, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —Ñ–æ—Ç–æ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π JSON.

üì• –í—Ö—ñ–¥
POST /analyze/ –∑ —Ñ–æ—Ç–æ

üì§ –í–∏—Ö—ñ–¥ (–ø—Ä–∏–∫–ª–∞–¥):
```
{
  "dish_name": "borsch",
  "ingredients": [
    { "name": "potato", "weight_g": 100, "calories_kcal": 77, "protein_g": 2, "fat_g": 0.1, "carbs_g": 17 },
    { "name": "carrot", "weight_g": 50, "calories_kcal": 20, "protein_g": 0.5, "fat_g": 0.1, "carbs_g": 4.7 }
  ],
  "total": {
    "calories_kcal": 97,
    "protein_g": 2.5,
    "fat_g": 0.2,
    "carbs_g": 21.7
  }
}
```
‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
- –í—Å–µ –∑—ñ–±—Ä–∞–Ω–æ –≤ –æ–¥–Ω–µ
- –ü—Ä–æ–π–¥–µ–Ω—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ test_full_pipeline.py


## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É NutriScan (v0.1)

```
nutriscan/
‚îú‚îÄ‚îÄ app/                       # –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ main.py               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ models/               # –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ç–æ—Ä, –¥–µ—Ç–µ–∫—Ç–æ—Ä —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ classifier.py
‚îÇ   ‚îú‚îÄ‚îÄ services/             # –õ–æ–≥—ñ–∫–∞ –ø–æ –≤–∞–≥–∞–º, –ë–ñ–£, —Ç–æ—â–æ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nutrition.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/                # –û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å, –¥–æ–ø–æ–º—ñ–∂–Ω–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ image_utils.py
‚îÇ   ‚îî‚îÄ‚îÄ api/                  # –†–æ—É—Ç–∏
‚îÇ       ‚îî‚îÄ‚îÄ routes.py
‚îÇ
‚îú‚îÄ‚îÄ tests/                    # Pytest —Ç–µ—Å—Ç–∏ –Ω–∞ –≤—Å—ñ –µ—Ç–∞–ø–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_upload.py
‚îÇ   ‚îú‚îÄ‚îÄ test_classifier.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ models/                   # –í–∞–≥–∏ –º–æ–¥–µ–ª–µ–π (.pt, .bin —Ç–æ—â–æ)
‚îÇ   ‚îú‚îÄ‚îÄ classifier.pt
‚îÇ   ‚îî‚îÄ‚îÄ detector.pt
‚îÇ
‚îú‚îÄ‚îÄ scripts/                  # –°–∫—Ä–∏–ø—Ç–∏ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó/–∑–∞–ø—É—Å–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ install.sh            # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ download_models.sh    # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–∞–≥
‚îÇ   ‚îî‚îÄ‚îÄ run_server.sh         # –ó–∞–ø—É—Å–∫ FastAPI
‚îÇ
‚îú‚îÄ‚îÄ docs/                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ DEVLOG.md             # Dev-–±–ª–æ–≥ –ø–æ –µ—Ç–∞–ø–∞—Ö
‚îÇ   ‚îî‚îÄ‚îÄ INSTALL.md            # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
‚îÇ
‚îú‚îÄ‚îÄ .env                      # –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```
