# ๐ ะขะตัะฝััะฝะต ะทะฐะฒะดะฐะฝะฝั โ NutriScan

## ๐ ะะตัะฐ

ะกัะฒะพัะธัะธ AI-ัะตัะฒัั ะฝะฐ Ubuntu 22.04, ัะบะธะน:

1. ะัะธะนะผะฐั ัะพัะพ ัััะฐะฒะธ ัะตัะตะท FastAPI
2. ะะตัะตะดะฐั ะทะพะฑัะฐะถะตะฝะฝั ะดะพ GPT-4 Vision (ัะตัะตะท API OpenAI)
3. ะััะธะผัั ัะพะทะฟัะทะฝะฐะฝั ัะฝะณััะดััะฝัะธ ะท ะฒะฐะณะพั, ะบะฐะปะพัััะผะธ, ะะะฃ
4. ะะพะฒะตััะฐั ะบะปััะฝัั ะณะพัะพะฒั JSON-ะฒัะดะฟะพะฒัะดั

---

## ๐ง ะัะฐะฟะธ ัะตะฐะปัะทะฐััั


## ๐ฅฎ ะัะฐะฟ 1 โ ะะฐะทะพะฒะธะน FastAPI ัะตัะฒะตั

### โ ะฆัะปั

ะะพะฑัะดัะฒะฐัะธ ัะตัะฒะตั, ัะบะธะน ะฟัะธะนะผะฐั ะทะพะฑัะฐะถะตะฝะฝั ัะตัะตะท POST-ะทะฐะฟะธั.

### ๐ ะััะด

```
POST /analyze/
multipart/form-data
ะะพะปะต: image
```

### ๐ ะะธััะด

```json
{ "message": "Image received", "filename": "some_image.jpg" }
```

### ๐ ะะฝััััะผะตะฝัะธ

* FastAPI, Pydantic
* Uvicorn
* Python 3.10+

### ๐ ะะตัะตะฒััะบะฐ

* ะกะตัะฒะตั ะทะฐะฟััะบะฐััััั
* ะะพะฑัะฐะถะตะฝะฝั ะทะฑะตััะณะฐััััั ั `tmp/`

---

## ๐ฅฎ ะัะฐะฟ 2 โ ะกะบัะธะฟั ะดะปั ะทะฐะฟะธัั ะดะพ OpenAI Vision

### โ ะฆัะปั

ะกัะฒะพัะธัะธ ะพะบัะตะผั ััะฝะบััั `analyze_image_base64()`, ัะบะฐ:

* ะพััะธะผัั base64-ะบะฐััะธะฝะบั
* ะฝะฐะดัะธะปะฐั ัั ะดะพ GPT-4 Vision
* ะฟะพะฒะตััะฐั JSON-ะฒะธะฒัะด

### ๐ ะััะด

```python
image_base64: str
```

### ๐ ะะธััะด

```json
{
  "ingredients": [...],
  "total": {...}
}
```

### ๐ ะะฝััััะผะตะฝัะธ

* OpenAI SDK
* `.env` ะท ะบะปััะตะผ `OPENAI_API_KEY`

### ๐ ะะตัะตะฒััะบะฐ

* ะะธะฒัะด ะท GPT-4 Vision ั ัะพัะผะฐัั JSON

---

## ๐ฅฎ ะัะฐะฟ 3 โ ะะพะฝะฒะตััะฐััั ะทะพะฑัะฐะถะตะฝะฝั ะฒ base64

### โ ะฆัะปั

ะะตะฐะปัะทัะฒะฐัะธ ััะฝะบััั `image_to_base64(image_path: str) -> str`

### ๐ ะััะด

`image.jpg`

### ๐ ะะธััะด

```python
"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD..."
```

### ๐ ะะตัะตะฒััะบะฐ

* ะะพะฒะตััะฐััััั ะบะพัะตะบัะฝะธะน base64 URL

---

## ๐ฅฎ ะัะฐะฟ 4 โ ะะฑัะพะฑะบะฐ ะฒัะดะฟะพะฒัะดั GPT ัะฐ ะฟะฐััะธะฝะณ ั JSON

### โ ะฆัะปั

* GPT-4 Vision ะฟะพะฒะตััะฐั ัะธััะธะน JSON (ัะตัะตะท ะฟัะพะผั)
* ะะฐััะธะฝะณ ะฒะธะบะพะฝัััััั ะฑะตะท ะดะพะดะฐัะบะพะฒะธั ััะฝะบััะน

```json
{
  "ingredients": [
    {
      "name": "chicken breast",
      "weight_g": 120,
      "calories_kcal": 198,
      "protein_g": 36,
      "fat_g": 4,
      "carbs_g": 0
    }
  ],
  "total": {
    "calories_kcal": 198,
    "protein_g": 36,
    "fat_g": 4,
    "carbs_g": 0
  }
}
```

### ๐ ะะตัะตะฒััะบะฐ

* JSON ััััะบัััะฐ ะทะฑัะณะฐััััั ะท ะพััะบัะฒะฐะฝะพั ััะตะผะพั

---

## ๐ฅฎ ะัะฐะฟ 5 โ ะะฝัะตะณัะฐััั FastAPI + OpenAI Vision

### โ ะฆัะปั

ะะพะดะฐัะธ ัะพัั `/analyze/`, ัะบะธะน:

1. ะฟัะธะนะผะฐั ะทะพะฑัะฐะถะตะฝะฝั
2. ะบะพะฝะฒะตัััั ั base64
3. ะฒัะดัะธะปะฐั ะดะพ OpenAI Vision
4. ะพะฑัะพะฑะปัั ะฒัะดะฟะพะฒัะดั
5. ะฟะพะฒะตััะฐั JSON

### ๐ ะััะด

```
POST /analyze/ ะท image
```

### ๐ ะะธััะด (JSON)

```json
{
  "ingredients": [
    {
      "name": "apple",
      "weight_g": 150,
      "calories_kcal": 78,
      "protein_g": 0.4,
      "fat_g": 0.3,
      "carbs_g": 20
    },
    {
      "name": "banana",
      "weight_g": 120,
      "calories_kcal": 105,
      "protein_g": 1.3,
      "fat_g": 0.3,
      "carbs_g": 27
    }
  ],
  "total": {
    "calories_kcal": 183,
    "protein_g": 1.7,
    "fat_g": 0.6,
    "carbs_g": 47
  }
}
```

### ๐ ะะตัะตะฒััะบะฐ

* ะะพะฒะตััะฐััััั ะบะพัะตะบัะฝะธะน JSON

---

## ๐ฅฎ ะัะฐะฟ 6 โ ะะพะณัะฒะฐะฝะฝั, ะพะฑัะพะฑะบะฐ ะฟะพะผะธะปะพะบ

### โ ะฆัะปั

* ะะพะดะฐัะธ ะปะพะณัะฒะฐะฝะฝั ะฒััั ะทะฐะฟะธััะฒ ัะตัะตะท `logger.py`
* ะะฑัะพะฑะปััะธ ะฟะพะผะธะปะบะธ (ะฒัะดัััะฝัะน ะบะปัั, ะฟะพะผะธะปะบะธ OpenAI)
* ะะพะฒะตััะฐัะธ `HTTPException` ะท ะบะพะดะพะผ ัะฐ ะฟะพะฒัะดะพะผะปะตะฝะฝัะผ

### ๐ ะะตัะตะฒััะบะฐ

* ะฃัั ะทะฐะฟะธัะธ ะปะพะณัััััั
* ะะพะผะธะปะบะธ ะฝะต ะฒะฐะปััั ัะตัะฒะตั

---

## ๐ฅฎ ะขะตัััะฒะฐะฝะฝั ัะตัะตะท curl
```bash
curl -X POST -F image=@dish.jpg http://localhost:8000/analyze/
```

---

## ๐ ะััะตะฝะทัั

ะฆะตะน ะฟัะพัะบั ะฟะพัะธััััััั ะฟัะด ะปััะตะฝะทััั MIT.

---

## ๐ ะกัััะบัััะฐ ะฟัะพัะบัั:
```bash
NutriScan/
โโโ app/
โ   โโโ __init__.py
โ   โโโ main.py             # ะขะพัะบะฐ ะฒัะพะดั FastAPI
โ   โโโ routes.py           # ะะพััะธ API (ะฝะฐะฟัะธะบะปะฐะด /analyze/)
โ   โโโ services/
โ   โ   โโโ __init__.py
โ   โ   โโโ image_utils.py   # ะะพะฝะฒะตััะฐััั ะทะพะฑัะฐะถะตะฝั ั base64
โ   โ   โโโ openai_client.py # ะะฐะฟะธั ะดะพ OpenAI Vision API
โ   โโโ logger.py           # ะะพะณัะฒะฐะฝะฝั
โโโ tmp/                    # ะขะธะผัะฐัะพะฒั ะทะพะฑัะฐะถะตะฝะฝั
โโโ tests/                  # ะฎะฝัั-ัะตััะธ (ะพะฟััะพะฝะฐะปัะฝะพ)
โ   โโโ check_openai_access.py
โ   โโโ test_openai_client.py
โโโ .env                    # OPENAI_API_KEY
โโโ requirements.txt        # ะะฐะปะตะถะฝะพััั
โโโ LICENSE                 # MIT License
โโโ README.md               # ะะพะบัะผะตะฝัะฐััั
โโโ deploy.sh               # ะกะบัะธะฟั ะพะฝะพะฒะปะตะฝะฝั systemd
โโโ install.sh              # ะกะบัะธะฟั ะฒััะฐะฝะพะฒะปะตะฝะฝั systemd

```
